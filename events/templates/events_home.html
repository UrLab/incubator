{% extends "base.html" %}

{% block title %}
    Evénements de UrLab
{% endblock %}

{% block content %}

    <ol class="breadcrumb">
      <li><a href="/">UrLab</a></li>
      <li><a href="/events/">Événements</a></li>
      <li class="active">{{ type }}</li>
    </ol>

    <ul class="nav nav-tabs" id="article-menu">
        <li class="pull-left">
            <p><strong>Nos Events</strong></p>
            <p>
            Abonnez vous à <a href="http://urlab.be/events/urlab.ics">notre flux ics (ical)</a> pour être toujours au courant des derniers événements :
            </p>

        </li>

        {% if type == "past" %}
          <li class="active pull-right" role="presentation">
        {% else %}
          <li class="pull-right" role="presentation">
        {% endif %}
            <a href="/events?type=past&offset=0" class="pull-right">
                <span class="glyphicon glyphicon-leaf" aria-hidden="true"></span>
                <span class="hidden-xs">Passé</span>
            </a>
        </li>


        {% if type == "incubation" %}
          <li class="active pull-right" role="presentation">
        {% else %}
          <li class="pull-right" role="presentation">
        {% endif %}
            <a href="/events?type=incubation&offset=0" class="pull-right">
                <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span>
                <span class="hidden-xs">En incubation</span>
            </a>
        </li>


        {% if type == "future" %}
          <li class="active pull-right" role="presentation">
        {% else %}
          <li class="pull-right" role="presentation">
        {% endif %}
            <a href="/events?type=future&offset=0" class="pull-right" >
                <span class="glyphicon glyphicon-record" aria-hidden="true"></span>
                <span class="hidden-xs">Futur</span>
            </a>
        </li>
    </ul>

    <div class="row">
    <div class="col-lg-11">

    <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="tab-futur">
            <br>
            <p>
              {% if type == "future" %}
                Vous retrouverez ici les événements à venir. Viendez ce sera bien !
              {% endif %}
              {% if type == "incubation" %}
                Vous retrouverez ici tout les événemnts en incubation. C'est à dire
                les événements que nous pensons organiser un jour mais pour lesquels
                nous n'avons pas encore trouver de dates.
              {% endif %}
              {% if type == "past" %}
                Vous retrouverez ici tout les événements passés. Sur certains vous
                trouverez des ressources intéréssante pour en apprendre plus sur le
                sujet si vous n'avez pas pu venir à l'événement ou aimeriez appronfondir la matière.
              {% endif %}
            </p>
              <div class="row">
                {% for event in events %}
                    {% include "event_card.html" %}
                    {% if forloop.counter|divisibleby:4%}
                      <div class="clearfix"></div>
                    {% endif %}
                {% endfor %}
              </div>
              {% if events|length == 0 %}
                {% if type == "future" %}
                  Mamamia ! Il n'y a rien de prévu dans le futur ! Vite, <a href="{% url "add_event" %}">crée un événement</a> !
                {% elif type == "past" %}
                  Il n'y a aucun événement passé, future is NOW !
                {% else %}
                  Aucun évenement n'est en incubation :/
                {% endif %}
              {% endif %}
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Déjà arrivé à la fin ?</h3>
                </div>
                <div class="panel-body">
                    N'oublie pas d'aller voir les
                    {% if type == "future" or type == "past" %}
                    <a href="/events?type=incubation&offset=0">
                        <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span>
                        événements en incubation
                    </a>
                    {% endif %}
                    {% if type == "future" or type == "incubation" %}
                    <a href="/events?type=past&offset=0">
                        <span class="glyphicon glyphicon-leaf" aria-hidden="true"></span>
                        événements passés
                    </a>
                    {% endif %}
                    {% if type == "incubation" or type == "past" %}
                    <a href="/events?type=future&offset=0">
                        <span class="glyphicon glyphicon-folder-close" aria-hidden="true"></span>
                        événements en futur
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    </div>

    </div>
    <div class="row">
    <div class="col-lg-11">
    <nav aria-label="page_buton">
      <ul class="pager">
        {% if last and offset == 0 %}
          <li class="previous disabled"><a>Older <span aria-hidden="true">&larr;</span></a></li>
          <li class="next disabled"><a>Newer <span aria-hidden="true">&rarr;</span></a></li>
        {% elif offset == 0 %}
          <li class="previous disabled"><a>Older <span aria-hidden="true">&larr;</span></a></li>
          <li class="next"><a href="" id="linkNew">Newer <span aria-hidden="true">&rarr;</span></a></li>
         {% elif last %}
          <li class="previous"><a href="" id="linkOld">Older <span aria-hidden="true">&larr;</span></a></li>
          <li class="next disabled"><a>Newer <span aria-hidden="true">&rarr;</span></a></li>
        {% else %}
          <li class="previous"><a href="" id="linkOld">Older <span aria-hidden="true">&larr;</span></a></li>
          <li class="next"><a href="" id="linkNew">Newer <span aria-hidden="true">&rarr;</span></a></li>
        {% endif  %}
      </ul>
    </nav>

    <div class="container-fluid">
            <a href="{% url "add_event" %}" class="btn btn-success pull-right">
                <span class="fa fa-plus" aria-hidden="true"></span>
                Proposer
            </a>
    </div>

    </div>

    </div>
    <div class="row"><p></p></div>


    <!-- Owiii du javascript random au milieu de nul part, much love-->
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $('#tabs').tab();
        });
        var current_offset = {{offset}};
        document.getElementById("linkOld").href="/events?type={{type}}&offset=" + (current_offset-1);
        document.getElementById("linkNew").href="/events?type={{type}}&offset=" + (current_offset+1);
    </script>

{% endblock %}

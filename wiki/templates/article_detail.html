{% extends "base.html" %}
{% load formatting %}
{% load humanize %}

{% block title %}
{{article.title}}
{% endblock %}

{% block content %}

    <ol class="breadcrumb">
      <li><a href="/">UrLab</a></li>
      <li><a href="{% url "wiki_home" %}">wiki</a></li>
      <li class="active">{{article.title}}</li>
    </ol>

    <ul class="nav nav-tabs" id="article-menu">
        <li class="pull-left">
            <h1>{{article.title}}</h1>
        </li>
        <li class="pull-right" role="presentation">
            <a href="#tab-old" class="pull-right" data-toggle="tab">
                <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
                <span class="hidden-xs">Historique</span>
            </a>
        </li>
        <li class="pull-right" role="presentation">
            <a href="{% url "edit_article" article.id %}" class="external" class="pull-right">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                <span class="hidden-xs">Éditer</span>
            </a>
        </li>
        <li class="active pull-right" role="presentation">
            <a href="#tab-current" class="pull-right" data-toggle="tab">
                <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span>
                <span class="hidden-xs">Article</span>
            </a>
        </li>
    </ul>


    <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="tab-current">
            {{article.content|markdown}}
        </div>

        <div class="tab-pane" id="tab-old">
            {% if not article_content_history %}
                <p>C'est vide ici</p>
            {% else %}
                {% for revision in article_content_history %}
                    <div class = "panel panel-default">
                        <div class = "panel-body">
                            <p class="card-text"> modifié le {{ revision.last_modified }} par: {{ revision.creator }} <br/>
                            commentaire: {{ revision.commit}}</p>
                        <a href="{% url "view_old_version" revision.pk %}" class="btn btn-primary stretched-link">Visualiser</a>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

{% endblock %}
